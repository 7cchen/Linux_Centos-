#自有服务
> 系统安装好了之后就可以直接使用的（内置）服务。


##1.运行模式（运行级别）：  
在Linux中存在一个进程：init(initialize,初始化),进程id是1.

	ps -ef | gref init  

该进程存在一个对应的配置文件：inittab(**系统运行级别配置文件**，在/etc/inittab目录下)。

	cat /etc/inittab
结果表明Centos中存在7种运行级别/模式：

	0	——	表示关机级别（不要将默认的运行级别设置为0）
	1 	——	单用户模式
	2	——	多用户模式，不带NFS（Network File System）
	3	——	多用户模式，完全的多用户模式（不带桌面的，纯命令行模式）
	4	——	没有被使用的模式（被保留模式）
	5	——	X11，完整的图形化界面模式
	6	——	表示重启级别（不要将默认的运行级别设置成这个值）
与该级别相关的几个命令：

	# init 0	表示关机
	# init 3	表示切换到不带桌面的模式
	# init 5	切换到图形界面
	# init 6	重启电脑

	注意：这些命令都是调用init进程，将数字（运行级别）传递给进程，进程去读配置文件执行对应的操作。
		 init命令需要超级管理员权限才能执行。


##2.用户和用户组管理（重点）  
用户账号的添加、删除、修改以及用户密码的管理。  
用户组的管理。注意三个文件：

	/etc/passwd		存储用户的关键信息
	/etc/group		存储用户组的关键信息
	/etc/shadow		存储用户的密码信息

	/etc/passwd文件结构：
		用户名：密码：用户ID：用户组ID：注释：家目录：解释器shell

		用户名：创建新用户的名称，后期登录需要输入
		密码：此密码为之一般都是x，表示密码占位符
		用户ID：用户的识别符
		用户组ID：该用户所属的主组ID
		注释：解释该用户是做什么的
		家目录：用户登录进入系统之后默认的位置
		解释器Shell:等待用户进入系统之后，用户输入指令之后，该解释器会收集用户输入的指令，传递给内核
				   处理。

###1、用户管理
添加用户：

	语法：#	useradd 选项	用户名
	常用选项：
		-g:	表示指定用户的用户组，选项的值可以是用户组的id，也可以是组名	
		-G：	表示指定用户的用户附加组，选项的值可以是用户组的id，也可以是组名
		-u:	uid，表示用户的id(用户的标识符)，系统默认从500之后按顺序分配uid，如果不想使用系统分配，
			可以自定义。
		-c:	添加注释。

	案例：创建用户，不带任何选项
		# uesradd zhangsan
	
	注意：查看用户的主组可以查看passwd文件，查看附加组可以查看group文件。

修改用户：

	语法：#	usermod 选项 用户名
	常用选项：
		-g:	表示指定用户的用户组，选项的值可以是用户组的id，也可以是组名	
		-G：	表示指定用户的用户附加组，选项的值可以是用户组的id，也可以是组名
		-u:	uid，表示用户的id(用户的标识符)，系统默认从500之后按顺序分配uid，如果不想使用系统分配，
			可以自定义。
		-l:	修改用户名(先是新的用户名，后是旧的用户名)

	案例：修改user_1用户主组为500，附加组为501
		# usermod -g 500 -G 501 user_1

	案例：修改user_1用户用户名，改为user_2
		# usermod -l user_2 user_1

设置密码：

	语法：#	passwd 用户名

	案例：设置user_2用户的密码
		# passwd user_2

	案例：切换为普通用户user_3
		# su user_3			//切换为root用户：	# su

删除用户：

	语法：#	userdel 选项 用户名
	常用选项：
		-r:	表示删除用户的同时，删除其家目录（无法删除登录的用户）

###2、用户组管理
用户组的添加、删除、修改就是对/etc/group文件的更新。  
用户组的文件结构：

	用户组名：密码：用户组ID：组内用户名

	密码：X表示占位符，绝大部分情况下不设置密码
	组内用户名：表示附加组是该组的用户名称

用户组添加：

	语法：#	groupadd 选项 用户名
	常用选项：
		-g:	类似用户添加里的-u操作，-g表示选择自己设置一个自定义的用户组ID数字，如果不指定，默认从500之后递增。

	案例：创建一个新的用户组，名为Administrator。
		# groupadd Administrator

用户组编辑：

	语法：#	groupmod 选项 用户组名
	常用选项：
		-g:	类似用户修改里的-u，-g表示选择自己自定义一个用户组ID数字
		-n:	修改用户组的组名

	案例：修改用户组的ID为502，名字为admin
		# groupmod -g 502 -n admin Administrator

用户组删除：

	语法：#	groupdel 用户组名
	注意：如果这个组是某个用户的主组时，不允许删除该用户组。除非先从组内移除所有用户。


##3.网络设置  
网卡配置文件的位置：		/etc/sysconfig/network-scripts  
在目录中网卡的配置文件命名格式：		ifcfg-网卡名称

	ONBOOT：	是否开机启动
	BOOTPROTO:	ip地址分配方式，DHCP表示动态主机分配协议
	HWADDR：	硬件地址，MAC地址

	案例：重启网卡操作
		# service network restart
	在有的分支版本中有可能没有service命令来操作服务，但是有一个共性的目录：/etc/init.d，这个目录中
	存放着对服务的快捷方式。所以以下命令也可以：
		# /etc/init.d/service restart

	扩展1：创建一个快捷方式（软连接），方便以后查找使用：
		# ln -s 原始文件的路径 快捷方式的路径
	说明：ls -l列出详细信息后，文件类型位置的“|”表示其类型为link(连接类型)，后面的“->”指向原始文件路径。

	扩展2：重启单个网卡？
		# ifdown 网卡名			//停止某个网卡（注意减少使用）
		# ifup 网卡名			//开启某个网卡


##4.SSH服务（重点）
> ssh(secure shell)：安全外壳协议，该协议有2个常用的作用：**远程连接协议**、远程文件传输协议。    

协议使用**端口**号：默认为22。可以被修改，如果需要修改，则需要修改ssh服务的配置文件：/etc/ssh/ssh_config中的Port，注意：

	1.端口范围从0-65535
	2.不能使用别的服务已经占用的端口

服务的启动/停止/重启  

	# service sshd start/stop/restart
	或者	# /etc/init.d/sshd start/stop/restart

###1.远程终端
终端工具：帮助运维人员连接远程的服务器，常见终端工具有：XShell、Putty。  
注意事项：

	在Linux服务器的终端上通过（#	ifconfig）查看Linux的IP地址

###2.SSH服务文件传输
可视化的界面传输工具：FileZilla
  
扩展：通过命令行工具来传输文件/文件夹  
工具：	PSCP.exe 


##5.设置主机名  
1.临时设置主机名（需要切换用户使之生效）

	# hostname 设置的主机名
2.永久设置主机名（需要重启）

	修改		/etc/sysconfig/network		中HOSTNAME后的的内容（与临时主机名一致即可）
3.修改Linux服务器的hosts文件，将设置的主机名添加到本地


##6.chkconfig  
> 相当于windows下的“电脑管家”之类的安全辅助工具，提供“开机启动项”的一个管理服务。  
  
1.开机启动服务查询：

	# chkconfig	--list
	结果说明： 0-6表示各个启动级别
2.删除服务：

	# chkconfig --del 服务名
3.添加开机启动服务：

	# chkconfig --add 服务名
4.设置服务在某个级别下开机启动（重点）：

	# chkconfig  --level  级别1级别2...   服务名   on/off


##7.ntp服务  
> ntp主要用于对计算机时间同步的管理操作。  

同步服务器时间方式：一次性同步（手动同步）、通过服务自动同步  

1.一次性同步时间：

	# ntpdate 时间服务器的域名或者IP地址  
	参考：http://www.ntp.org.cn/pool.php
2.设置时间同步服务：
	
	服务名：ntpd
	启动ntpd服务
		#	service ntpd start
	设置ntpd服务开机启动：
		# chkconfig --list | grep ntpd
		# chkconfig --level  35  ntpd


##8.防火墙服务  
> 防火墙：防范一些网络攻击。有软件防火墙、硬件防火墙之分。  
> 防火墙选择性的让请求通过，从而保证网络安全性。

在centos6.5中防火墙有一个名称：iptables【7.x中默认使用的是firewalld】

1.查看iptables是否启动：

	# ps -ef | grep iptables			或者
	# chkconfig --list | grep iptables
2.iptables服务启动/重启/关闭  
	
	# service	iptables	start/restart/stop
3.查看防火墙的状态（规则）

	# service firewalld status
4.查看规则的命令：

	# iptables -L -n
	-L: 列表列出规则
	-n: 表示将单词表达形式改成数字形式显示
5.简单设置防火墙规则


##9.rpm管理（重点）  
主要是对Linux服务器上的软件包进行对应管理操作，管理分为：查询、卸载、安装。

1.查询某个软件的安装情况：

	#	rpm -qa |grep 关键词
	选项：
		-q:	查询，query
		-a:	全部，all
2.卸载某个软件：

	#	rpm -e 软件的名称 --nodeps
	说明：--nodeps表示忽略依赖关系强制卸载
3.软件的安装：

	查看块状设备的信息：
		#	lsblk

	扩展内容：
		光盘的挂载和解挂：
			解挂操作：	#	umount	当前设备的挂载点（路径）
			挂载操作：	#	mount	设备原始地址 	要挂载的位置路径
	
	安装软件的命令：
		#	rpm		-ivh	软件包完整名称
		选项：
			-i:	安装。install
			-v:	显示进度条
			-h:	表示以“#”形式显示进度条


##10.cron/crontab计划任务（重点）
作用：计划任务可以全天候定时定点执行任务。

	# 	crontab		选项
	常用选项：
		-l:	list,列出指定用户的计划任务列表
		-e:	edit,编辑指定用户的计划任务列表
		-u: user,指定的用户名，如果不指定，则表示当前用户
		-r:	remove,删除指定用户的计划任务列表
1.列出：

	#	crontab -l
2.编辑计划任务(重点):

	计划任务的规则语法格式，以行为单位，一行则为一个计划：
	分	时	日	月	周	需要执行的计划

	符号表示：
		*	表示取值范围中的每一个数字
		-	作区间表达式，即 1-7
		/	表示每多少个，即 */10
		,	表示多个取值

	案例1：每月1、10、22日的4：45重启network服务
		#  45  4  1,10,22  *  *  service  network  restart

	案例2：每周六、周日的1：10重启network服务
		#  10  1  *  *  0,6  service  network  restart
Crontab权限问题：超级管理员可以通过设置某些用户不可以设置计划任务。  
配置文件位于（黑名单）：	/etc/cron.deny
还有一个配置文件（白名单）：	/etc/cron.allow  
注意：白名单权限远远大于黑名单。